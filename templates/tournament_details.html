{% extends "base.html" %}

{% block content %}
<div class="card">
    <h1>{{ tournament[1] }} - {{ tournament[2].upper() }}</h1>
    <p>Tournament Details & Rules</p>
</div>

<div class="card">
    <h2>Tournament Information</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
        <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
            <h4>Entry Fee</h4>
            <div style="font-size: 1.5rem; color: #ffc107;">KSh {{ tournament[3] }}</div>
        </div>
        <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
            <h4>Prize Pool</h4>
            <div style="font-size: 1.5rem; color: #28a745;">KSh {{ tournament[5] }}</div>
        </div>
        <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
            <h4>Players</h4>
            <div style="font-size: 1.5rem;">{{ participants }}/{{ tournament[4] }}</div>
        </div>
        <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
            <h4>Status</h4>
            <div style="font-size: 1.2rem; color: #00ff88;">{{ tournament[6].upper() }}</div>
        </div>
    </div>
</div>

<!-- Game Mode & Rules -->
<div class="card">
    <h2>Game Mode & Rules</h2>
    {% if tournament[2] == 'cod_mobile' %}
        <div style="background: rgba(220,53,69,0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid #dc3545;">
            <h3>COD Mobile - Battle Royale</h3>
            <ul>
                <li><strong>Mode:</strong> Battle Royale (Solo)</li>
                <li><strong>Map:</strong> Blackout or Alcatraz</li>
                <li><strong>Goal:</strong> Be the last player standing</li>
                <li><strong>Time Limit:</strong> 20 minutes per match</li>
                <li><strong>Proof Required:</strong> Victory screen screenshot</li>
            </ul>
        </div>
    {% elif tournament[2] == 'pubg_mobile' %}
        <div style="background: rgba(255,193,7,0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid #ffc107;">
            <h3>PUBG Mobile - Classic</h3>
            <ul>
                <li><strong>Mode:</strong> Classic (Solo)</li>
                <li><strong>Map:</strong> Erangel or Sanhok</li>
                <li><strong>Goal:</strong> Achieve highest placement</li>
                <li><strong>Time Limit:</strong> 30 minutes per match</li>
                <li><strong>Proof Required:</strong> Results screen screenshot</li>
            </ul>
        </div>
    {% elif tournament[2] == 'fifa_mobile' %}
        <div style="background: rgba(40,167,69,0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid #28a745;">
            <h3>FIFA Mobile - Head to Head</h3>
            <ul>
                <li><strong>Mode:</strong> Head to Head</li>
                <li><strong>Format:</strong> 1v1 matches</li>
                <li><strong>Goal:</strong> Score more goals than opponent</li>
                <li><strong>Time Limit:</strong> 90 seconds per match</li>
                <li><strong>Proof Required:</strong> Match result screenshot</li>
            </ul>
        </div>
    {% elif tournament[2] == 'efootball' %}
        <div style="background: rgba(23,162,184,0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid #17a2b8;">
            <h3>eFootball - Online Match</h3>
            <ul>
                <li><strong>Mode:</strong> Online Match</li>
                <li><strong>Format:</strong> 1v1 matches</li>
                <li><strong>Goal:</strong> Win by scoring more goals</li>
                <li><strong>Time Limit:</strong> 10 minutes per match</li>
                <li><strong>Proof Required:</strong> Final score screenshot</li>
            </ul>
        </div>
    {% elif tournament[2] == 'pes' %}
        <div style="background: rgba(102,126,234,0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid #667eea;">
            <h3>PES Mobile - myClub</h3>
            <ul>
                <li><strong>Mode:</strong> myClub Online Match</li>
                <li><strong>Format:</strong> 1v1 matches</li>
                <li><strong>Goal:</strong> Score more goals than opponent</li>
                <li><strong>Time Limit:</strong> 12 minutes per match</li>
                <li><strong>Proof Required:</strong> Match result screenshot showing final score</li>
            </ul>
        </div>
    {% endif %}
</div>

<!-- Tournament Format -->
<div class="card">
    <h2>Tournament Format</h2>
    <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
        <h3>Single Elimination Bracket</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
            <div>
                <h4>Round 1</h4>
                <p>{{ tournament[4] }} players ‚Üí {{ tournament[4]//2 }} winners</p>
            </div>
            <div>
                <h4>Semi-Finals</h4>
                <p>{{ tournament[4]//2 }} players ‚Üí {{ tournament[4]//4 }} winners</p>
            </div>
            <div>
                <h4>Finals</h4>
                <p>{{ tournament[4]//4 }} players ‚Üí 1 champion</p>
            </div>
        </div>
    </div>
</div>

<!-- Prize Distribution -->
<div class="card">
    <h2>Prize Distribution</h2>
    <div style="background: rgba(0,255,136,0.1); padding: 1rem; border-radius: 8px;">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
            <div style="text-align: center;">
                <div style="font-size: 2rem;">ü•á</div>
                <div><strong>1st Place</strong></div>
                <div style="color: #ffc107;">40% of prize pool</div>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 2rem;">ü•à</div>
                <div><strong>2nd Place</strong></div>
                <div style="color: #c0c0c0;">25% of prize pool</div>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 2rem;">ü•â</div>
                <div><strong>3rd Place</strong></div>
                <div style="color: #cd7f32;">12% of prize pool</div>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 1.5rem;">üèÖ</div>
                <div><strong>4th Place</strong></div>
                <div style="color: #28a745;">8% of prize pool</div>
            </div>
        </div>
    </div>
</div>

<!-- Join Tournament -->
<div class="card" style="text-align: center;">
    {% if tournament[6] == 'open' and tournament[3] <= session.balance %}
        <h2>Ready to Join?</h2>
        <p>Entry fee: KSh {{ tournament[3] }} will be deducted from your balance</p>
        <a href="{{ url_for('join_tournament', tournament_id=tournament[0]) }}" 
           class="btn btn-success" style="font-size: 1.2rem; padding: 1rem 2rem;">
           Join Tournament
        </a>
    {% elif tournament[6] == 'open' %}
        <h2>Insufficient Balance</h2>
        <p>You need KSh {{ tournament[3] }} to join this tournament</p>
        <a href="{{ url_for('wallet') }}" class="btn btn-primary">Add Funds</a>
    {% else %}
        <h2>Tournament {{ tournament[6].title() }}</h2>
        <p>This tournament is no longer accepting new players</p>
    {% endif %}
</div>
{% endblock %}